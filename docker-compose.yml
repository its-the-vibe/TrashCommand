version: '3.8'

services:
  trashcommand:
    build:
      context: .
      dockerfile: Dockerfile
    image: trashcommand:latest
    read_only: true
    extra_hosts:
      - "host.docker.internal:host-gateway"
    container_name: trashcommand
    restart: unless-stopped
    environment:
      # Slack configuration
      SLACK_BOT_TOKEN: ${SLACK_BOT_TOKEN}
      
      # Redis configuration
      REDIS_ADDR: ${REDIS_ADDR:-host.docker.internal:6379}
      REDIS_PASSWORD: ${REDIS_PASSWORD:-}
      REDIS_CHANNEL: ${REDIS_CHANNEL:-slack-relay-reaction-added}
      
      # TimeBomb configuration
      TIMEBOMB_REDIS_CHANNEL: ${TIMEBOMB_REDIS_CHANNEL:-timebomb-messages}
      TIMEBOMB_TTL_SECONDS: ${TIMEBOMB_TTL_SECONDS:-5}
